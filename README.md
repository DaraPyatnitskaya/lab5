# Лабораторная работа №5: Многопоточность

## Описание

Данная лабораторная работа направлена на освоение принципов многопоточности в C++ с использованием библиотеки `std::thread`, мьютексов `std::mutex` и атомарных операций `std::atomic`. В процессе работы был реализован параллельный алгоритм обработки изображений для демонстрации использования многопоточности и синхронизации потоков.

В лабораторной работе были реализованы следующие алгоритмы для обработки изображений:

* Последовательное размытие изображения
* Параллельное размытие с использованием `std::thread`
* Параллельное размытие с использованием OpenMP
* Пример использования атомарных операций для синхронизации потоков

## Структура проекта

Проект состоит из следующих компонентов:

* **src/image.hpp** — заголовочный файл, в котором определяются структуры данных и объявления функций для обработки изображений.
* **src/main.cpp** — основной файл с функцией `main`, в котором демонстрируются результаты работы функций размытия и атомарных операций.

## Цель лабораторной работы

Целью данной работы является:

1. Научиться создавать и управлять потоками в C++ с использованием `std::thread`.
2. Освоить механизмы синхронизации потоков: мьютексы для защиты общих ресурсов.
3. Понять необходимость и принципы использования атомарных операций для синхронизации потоков.
4. Реализовать параллельный алгоритм обработки данных для повышения производительности.

## Алгоритмы и методы параллелизации

### 1. Последовательное размытие (sequentialBlur)

Функция `sequentialBlur` выполняет размытие изображения, вычисляя среднее значение цвета для каждого пикселя в окрестности 3x3. Это позволяет создать эффект размытия.

### 2. Параллельное размытие с использованием `std::thread` (parallelBlurThreads)

В функции `parallelBlurThreads` изображение делится на несколько частей (например, горизонтальные полосы), и каждый поток выполняет размытие своей части изображения. Это ускоряет процесс обработки за счет многозадачности.

### 3. Параллельное размытие с использованием OpenMP

В опциональной версии используется директива `#pragma omp parallel for`, которая позволяет автоматически распределить обработку пикселей между потоками с использованием OpenMP.

### 4. Атомарные операции

Для демонстрации атомарных операций была реализована простая программа, которая увеличивает общий счетчик в нескольких потоках. Были созданы две версии: одна с использованием мьютекса для синхронизации, а другая с использованием атомарных операций `std::atomic`.

## Сравнение производительности

В ходе лабораторной работы были произведены следующие измерения:

1. **Время выполнения последовательного размытия (sequentialBlur)**.
2. **Время выполнения параллельного размытия с использованием `std::thread` (parallelBlurThreads)**.
3. **Время выполнения параллельного размытия с использованием OpenMP (опционально)**.

В результате были получены данные, демонстрирующие ускорение обработки изображения при использовании многопоточности.

## Результаты

* Сравнение времени выполнения различных версий алгоритмов было проведено для изображений размером 1000x1000 пикселей.
* Параллельное размытие с использованием `std::thread` показало значительное улучшение производительности по сравнению с последовательным размытие.
* В версии с OpenMP производительность была еще выше.

